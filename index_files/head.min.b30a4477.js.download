function uniq(e){return[...new Set(e)]}function allOf(e,t=document){return Array.from(t.querySelectorAll(e))}function firstOf(e){return document.querySelector(e)}let marked=new WeakSet;function mark(e){return marked.add(e),!1}function isMark(e){return marked.has(e)}function checkMark(e){return!!isMark(e)||mark(e)}function clearMark(){marked=new WeakSet}const prefixObserver=new MutationObserver(function(e){for(const t of e)for(const e of t.addedNodes){if(!(e instanceof HTMLElement))continue;const t='a[href^="/"]';if(e.matches(t)){if(checkMark(e))continue;prefixElement(e)}for(const r of e.querySelectorAll(t))checkMark(r)||prefixElement(r)}});prefixObserver.observe(document.documentElement,{childList:!0,subtree:!0});const ok=e=>e.ok?Promise.resolve(e):Promise.reject(e.statusText),asJson=e=>e.json(),asText=e=>e.text(),okJson=e=>Promise.resolve(e).then(ok).then(asJson),okText=e=>Promise.resolve(e).then(ok).then(asText),themeName=dynamic_data.themeName||dynamic_data.currentThemeName,themesMatrix=dynamic_data.themesMatrix,basePathPrefix=dynamic_data.virtualDomainCurrentPath||"",ignorePaths=uniq([...Object.values(dynamic_data.virtualDomainPathFound||{}),...Object.values(dynamic_data.virtualDomainPathIgnorePrefix||{}),...Object.values(dynamic_data.virtualDomainPathsAvailable||{})]).map(e=>e.startsWith("/")?e:`/${e}`),ignorePathsExact=uniq(Object.values(dynamic_data.virtualDomainPathIgnoreExact||{})),stripPath=dynamic_data.virtualDomainPathRootAlias||"";function prefixless(e,t=ignorePaths){return t.reduce((e,t)=>e.replace(new RegExp(t,"gi"),""),e)}const isPrefixedBy=(e="",t=[])=>t.some(t=>(e||"").startsWith(t)),isExactPath=(e="",t=[])=>t.some(t=>(e||"")===t);function prefixBasePath(e="",t=basePathPrefix,r=ignorePaths,a=ignorePathsExact,n=stripPath){return e.startsWith("/")?n&&e.startsWith(n)?e.replace(n,""):t&&"/"!==t?isExactPath(e,[t,...a])?e:isPrefixedBy(e,[t,...r])?e:t+e:e:e}function prefixElement(e,t="href"){const r=e.getAttribute(t);r&&prefixBasePath(r)!==r&&e.setAttribute(t,prefixBasePath(r))}const originalFetch=window.fetch;function jsonFetch(e,{data:t=null,method:r="get",...a}={}){return r=t&&"get"===r?"post":r,body="get"!==r&&t&&is.not.string(t)?JSON.stringify(t):void 0,originalFetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:r,body:body,...a}).then(e=>e.ok?e.json():Promise.reject("failed to fetch json data")).then(({error:e,message:t,...r})=>0!==e.error?Promise.reject(t):r)}const domstr=e=>is.string(e)?e:new URLSearchParams(e).toString();window.fetch=((e,{body:t,...r}={})=>originalFetch(prefixBasePath(e),{body:t?domstr(t):t,credentials:"same-origin",...r}).catch((e={})=>"Failed to fetch"===e.message?{}:e)),window.jFetch=((e,{method:t,body:r,headers:a,...n})=>fetch(e,{headers:{"x-requested-with":"XMLHttpRequest","content-type":/POST/i.test(t)?"application/x-www-form-urlencoded":"json"===dataType?"application/json":void 0,...a},method:t,body:r&&is.object(r)?domstr(r):r,...n}));const axios={get:e=>window.fetch(e).then(ok).then(asJson).then(e=>({data:e}))};Promise.prototype.fail=Promise.prototype.catch,Promise.prototype.done=Promise.prototype.then,Promise.prototype.promise=function(){return this};const defaultValues={type:"get",data:void 0,dataType:"json",success:()=>{},error:()=>{},headers:{}};function isJsEnabled(){return document.jsEnabled||(document.jsEnabled=!!(document.getElementsByTagName&&document.createElement&&document.createTextNode&&document.documentElement&&document.getElementById)),document.jsEnabled}function HTTPGet(e,t,r){var a=new XMLHttpRequest,n=!0;return t||(n=!1),a.open("GET",e,n),a.send(null),n?(a.onreadystatechange=function(){4==a.readyState&&t(a.responseText,a,r)},a):a.responseText}function HTTPPost(e,t,r,a){var n=new XMLHttpRequest,o=!0;t||(o=!1),n.open("POST",e,o);var s="";if("object"==typeof a)for(var i in n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a)s+=(s?"&":"")+i+"="+encodeURIComponent(a[i]);else s=a;return n.send(s),o?(n.onreadystatechange=function(){4==n.readyState&&t(n.responseText,n,r)},n):n.responseText}function redirectFormButton(e,t,r){createIframe(),t.onmouseover=t.onfocus=function(){t.onclick=function(){var t=this,a=t.form.action,n=t.form.target;return this.form.action=e,this.form.target="redirect-target",r.onsubmit(),window.iframeHandler=function(){var e=id("redirect-target");t.form.action=a,t.form.target=n;try{response=(e.contentWindow||e.contentDocument||e).document.body.innerHTML,response=response.replace(/[\f\n\r\t]/g," "),window.opera&&(response=response.replace(/&quot;/g,'"'))}catch(e){response=null}id("redirect-target").onload=null,id("redirect-target").src="about:blank",response=parseJson(response),0!=response.status?r.oncomplete(response.data):r.onerror(response.data)},!0}},t.onmouseout=t.onblur=function(){t.onclick=null}}jQuery.ojooAjax=(({url:e,type:t,data:r,success:a,error:n,dataType:o,headers:s}=defaultValues)=>(s={"x-requested-with":"XMLHttpRequest","content-type":/POST/i.test(t)?"application/x-www-form-urlencoded":"json"===o?"application/json":void 0,...s},window.fetch(e,{method:t,headers:s,body:r}).then(ok).then(/json/gi.test(o)?asJson:asText).then(a).catch(n))),isJsEnabled()&&(document.documentElement.className="js"),"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){for(var e=["MSXML3","MSXML2","Microsoft"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t]+".XMLHTTP")}catch(e){}throw new Error("No XML component installed!")});const page={loadSubscribers:[],addLoadEvent:e=>{"complete"===document.readyState?e():page.loadSubscribers.push(e)},notifySubscribers:()=>{page.loadSubscribers.forEach(e=>e())},init:()=>{window.addEventListener("load",page.notifySubscribers)}};page.init();const addLoadEvent=page.addLoadEvent;function addSubmitEvent(e,t){var r=e.onsubmit;e.onsubmit="function"!=typeof r?t:function(){return r()&&t()}}function absolutePosition(e){var t=0,r=0,a=/^div$/i.test(e.tagName);a&&e.scrollLeft&&(t=e.scrollLeft),a&&e.scrollTop&&(r=e.scrollTop);var n={x:e.offsetLeft-t,y:e.offsetTop-r};if(e.offsetParent){var o=absolutePosition(e.offsetParent);n.x+=o.x,n.y+=o.y}return n}function dimensions(e){return{width:e.offsetWidth,height:e.offsetHeight}}function hasClass(e,t){return e.className==t||!!new RegExp("(^| )"+t+"($| )").test(e.className)}function addClass(e,t){return!hasClass(e,t)&&(e.className+=" "+t,!0)}function removeClass(e,t){return!!hasClass(e,t)&&(e.className=eregReplace("(^|\\s+)"+t+"($|\\s+)"," ",e.className),!0)}function toggleClass(e,t){return!(!removeClass(e,t)&&!addClass(e,t))}function eregReplace(e,t,r){return r.replace(new RegExp(e,"g"),t)}function removeNode(e){return"string"==typeof e&&(e=id(e)),!(!e||!e.parentNode)&&e.parentNode.removeChild(e)}function stopEvent(e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function parseJson(data){return"{"!=data.substring(0,1)?{status:0,data:data.length?data:"Unspecified error"}:eval("("+data+");")}function createIframe(){deleteIframe(),window.iframeHandler=function(){};var e=document.createElement("div");e.id="redirect-holder",e.innerHTML='<iframe name="redirect-target" id="redirect-target" class="redirect" onload="window.iframeHandler();"></iframe>';var t=e.firstChild;t.name="redirect-target",t.setAttribute("name","redirect-target"),t.id="redirect-target",t.style.position="absolute",t.style.height="1px",t.style.width="1px",t.style.visibility="hidden",document.body.appendChild(e)}function deleteIframe(){var e=id("redirect-holder");null!=e&&removeNode(e)}function id(e){return document.getElementById(e)}function elHeight(e){return e?e.offsetHeight:0}var $j=jQuery,labelAnimation=function(){"use strict";return{initlabelAnimation:function(){$j(".form-checkbox").each(function(){$j(this).after("<label for='"+$j(this).attr("id")+"'></label>")});var e=$j(".ojoo-login-box input.form-text, .modal input.form-text").first();e.focus(),e.parents(".form-item").addClass("focused"),$j(".collapsed input.form-text").first().parents(".form-item").removeClass("focused"),$j("input.form-text").each(function(){$j(this).val()&&$j(this).addClass("filled"),$j(this).on("blur input",function(){$j(this).val()?$j(this).addClass("filled"):($j(this).removeClass("filled"),$j(this).parents(".form-item").removeClass("focused"))})}),$j("input").on("focus",function(){$j(this).parents(".form-item").addClass("focused")})},initRequiredFields:function(){var e=0;return $j("input.form-submit").click(function(){if("submit"===$j(this).attr("type")){var t=$j(this).closest("form");$j(t).find("input,textarea").each(function(){!$j(this).prop("required")&&!$j(this).hasClass("required")||$j.trim($j(this).val()).length?$j(this).removeClass("error"):($j(this).addClass("error"),e++)}),$j(t).find(".form-checkbox").each(function(t){$j(this).prop("required")&&($j(this).is(":checked")?$j(this).removeClass("error"):(e++,$j(this).addClass("error")))})}}),!(e>0)}}}();$j(function(){labelAnimation.initlabelAnimation(),labelAnimation.initRequiredFields()});const term=dynamic_data.termsConfig;Object.keys(term).forEach(e=>term[e].facetFields=term[e].facetFields.split(/, ?/));const theme={waveColor:"#d7d7d7",progressColor:"#52d9a0",recurlyFontColor:"#333",feature:{showPlayerOnSingleAudioPage:!1},facets:[term.artist.facetFields[0],term.category.defaultSearchField,term.category.defaultSearchFieldLv1,term.tag.defaultSearchField,"libraryFacet","audio.playTime"],queryAndWeights:{[term.category.defaultSearchField]:3,[term.tag.defaultSearchField]:2,title:1,body:1,[term.category.defaultSearchFieldLv1]:3,"user.name":2,[term.artist.defaultSearchField]:2,type:1}},searchIndex="devel_soundsnap",searchIndexNewest="devel_newest",wavesurfer={},hasPromotedFacets=!0,hasBpmFacets=!1,storageHost=dynamic_data.storageHost?dynamic_data.storageHost.audio:{},searchTermPaths=["library","collection","category"],allowedSearchUrlParams=["query","minaudio","maxaudio","filteredTags","filteredCategories","filteredSubCategories","filteredLibraries","sorting","page"],termOverride={tag:"tag",category:"category",playlist:"collection"},termsConfig=term,no_heading_pages=["dynamic_user","dynamic_playlist.audio"];let typesenseCollection=dynamic_data.typesenseSearchCollection;
